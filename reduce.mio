reduce = block(f, xs, s=None,
    s ifNone (
        try (
            s = next(xs)
        ) catch(StopIteration) (
            raise TypeError("reduce() of empty sequence with no initial value")
        )
    )

    a = s
    xs foreach(x,
        a = f(a, x)
    )
    a
)
