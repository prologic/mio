reduce = block(f, xs, s=None,
    it = iter(xs)

    s ifNone (
        try (
            s = next(it)
        ) catch(StopIteration) (
            raise TypeError("reduce() of empty sequence with no initial value")
        )
    )

    a = s
    it foreach(x,
        a = f(a, x)
    )
    a
)

Number fact = method(
    reduce(block(a, n, a * n), (1 .. self) asList, 0)
)
